{% extends "base.html" %}

{% block title %}Codebreaker â€” Game{% endblock %}

{% block content %}
<div class="game-layout">
  <section class="game-card">
    <h1 class="game-title">Guess the Passphrase</h1>
    <p class="game-subtitle">
      Press <span class="highlight">Record</span>, say your guess, and weâ€™ll check it against the secret passphrase.
    </p>

    <div class="info-row">
      <div class="info-label">Status:</div>
      <div id="status-text" class="info-value">Waiting to start...</div>
    </div>

    <div class="info-row">
      <div class="info-label">Attempts left:</div>
      <div id="attempts-left" class="info-value">3</div>
    </div>

    <button id="record-btn" class="btn-primary">
      ðŸŽ™ Start Recording
    </button>

    <div class="output-box">
      <h2 class="output-label">Your last guess:</h2>
      <p id="guess-text" class="output-text">â€”</p>
    </div>

    <div id="result-message" class="result-message">
      <!-- JS will inject feedback here -->
    </div>
  </section>

  <section class="side-card">
    <h2>How it works</h2>
    <ol class="steps-list">
      <li>Click <strong>Start Recording</strong>.</li>
      <li>Say your guess clearly into the mic.</li>
      <li>Our ML client processes the audio and checks your guess.</li>
      <li>Track results + attempts in real-time.</li>
    </ol>
  </section>
  <!-- New passphrase modal/box -->
<div id="new-passphrase-modal" class="modal hidden">
  <div class="modal-content">
    <h2 class="modal-title">Set a new passphrase</h2>
    <p class="modal-text">
      You guessed the current passphrase correctly. Enter a new one below for
      the next round of the game.
    </p>

    <input
      id="new-passphrase-input"
      type="text"
      class="modal-input"
      placeholder="Type your new passphrase"
    />

    <div class="modal-actions">
      <button id="set-passphrase-btn" class="btn-primary">Save</button>
      <button id="close-passphrase-btn" class="btn-secondary">Cancel</button>
    </div>
  </div>
</div>
{% endblock %}